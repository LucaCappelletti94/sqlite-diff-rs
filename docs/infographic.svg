<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 900 2040" width="900" height="2040">
  <defs>
    <linearGradient id="header-grad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#1e3a5f"/>
      <stop offset="100%" style="stop-color:#2d5a87"/>
    </linearGradient>
    <symbol id="icon-shield" viewBox="0 0 512 512">
      <path d="M256 0c4.6 0 9.2 1 13.4 2.9L457.7 82.8c22 9.3 38.4 31 38.3 57.2c-.5 99.2-41.3 280.7-213.6 363.2c-16.7 8-36.1 8-52.8 0C57.3 420.7 16.5 239.2 16 140c-.1-26.2 16.3-47.9 38.3-57.2L242.7 2.9C246.8 1 251.4 0 256 0z"/>
    </symbol>
    <symbol id="icon-check" viewBox="0 0 512 512">
      <path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/>
    </symbol>
    <!-- Rust official logo -->
    <symbol id="icon-rust" viewBox="0 0 24 24">
      <path d="M23.8346 11.7033l-1.0073-.6236a13.7268 13.7268 0 00-.0283-.2936l.8656-.8069a.3483.3483 0 00-.1154-.578l-1.1066-.414a8.4958 8.4958 0 00-.087-.2856l.6904-.9587a.3462.3462 0 00-.2257-.5446l-1.1663-.1894a9.3574 9.3574 0 00-.1407-.2622l.49-1.0761a.3437.3437 0 00-.0274-.3361.3486.3486 0 00-.3006-.154l-1.1845.0416a6.7444 6.7444 0 00-.1873-.2268l.2723-1.153a.3472.3472 0 00-.417-.4172l-1.1532.2724a14.0183 14.0183 0 00-.2278-.1873l.0415-1.1845a.3442.3442 0 00-.49-.328l-1.076.491c-.0872-.0476-.1742-.0952-.2623-.1407l-.1903-1.1673A.3483.3483 0 0016.256.955l-.9597.6905a8.4867 8.4867 0 00-.2855-.086l-.414-1.1066a.3483.3483 0 00-.5781-.1154l-.8069.8666a9.2936 9.2936 0 00-.2936-.0284L12.2946.1683a.3462.3462 0 00-.5892 0l-.6236 1.0073a13.7383 13.7383 0 00-.2936.0284L9.9803.3374a.3462.3462 0 00-.578.1154l-.4141 1.1065c-.0962.0274-.1903.0567-.2855.086L7.744.955a.3483.3483 0 00-.5447.2258L7.009 2.348a9.3574 9.3574 0 00-.2622.1407l-1.0762-.491a.3462.3462 0 00-.49.328l.0416 1.1845a7.9826 7.9826 0 00-.2278.1873L3.8413 3.425a.3472.3472 0 00-.4171.4171l.2713 1.1531c-.0628.075-.1255.1509-.1863.2268l-1.1845-.0415a.3462.3462 0 00-.328.49l.491 1.0761a9.167 9.167 0 00-.1407.2622l-1.1662.1894a.3483.3483 0 00-.2258.5446l.6904.9587a13.303 13.303 0 00-.087.2855l-1.1065.414a.3483.3483 0 00-.1155.5781l.8656.807a9.2936 9.2936 0 00-.0283.2935l-1.0073.6236a.3442.3442 0 000 .5892l1.0073.6236c.008.0982.0182.1964.0283.2936l-.8656.8079a.3462.3462 0 00.1155.578l1.1065.4141c.0273.0962.0567.1914.087.2855l-.6904.9587a.3452.3452 0 00.2268.5447l1.1662.1893c.0456.088.0922.1751.1408.2622l-.491 1.0762a.3462.3462 0 00.328.49l1.1834-.0415c.0618.0769.1235.1528.1873.2277l-.2713 1.1541a.3462.3462 0 00.4171.4161l1.153-.2713c.075.0638.151.1255.2279.1863l-.0415 1.1845a.3442.3442 0 00.49.327l1.0761-.49c.087.0486.1741.0951.2622.1407l.1903 1.1662a.3483.3483 0 00.5447.2268l.9587-.6904a9.299 9.299 0 00.2855.087l.414 1.1066a.3452.3452 0 00.5781.1154l.8079-.8656c.0972.0111.1954.0203.2936.0294l.6236 1.0073a.3472.3472 0 00.5892 0l.6236-1.0073c.0982-.0091.1964-.0183.2936-.0294l.8069.8656a.3483.3483 0 00.578-.1154l.4141-1.1066a8.4626 8.4626 0 00.2855-.087l.9587.6904a.3452.3452 0 00.5447-.2268l.1903-1.1662c.088-.0456.1751-.0931.2622-.1407l1.0762.49a.3472.3472 0 00.49-.327l-.0415-1.1845a6.7267 6.7267 0 00.2267-.1863l1.1531.2713a.3472.3472 0 00.4171-.416l-.2713-1.1542c.0628-.0749.1255-.1508.1863-.2278l1.1845.0415a.3442.3442 0 00.328-.49l-.49-1.076c.0475-.0872.0951-.1742.1407-.2623l1.1662-.1893a.3483.3483 0 00.2258-.5447l-.6904-.9587.087-.2855 1.1066-.414a.3462.3462 0 00.1154-.5781l-.8656-.8079c.0101-.0972.0202-.1954.0283-.2936l1.0073-.6236a.3442.3442 0 000-.5892zm-6.7413 8.3551a.7138.7138 0 01.2986-1.396.714.714 0 11-.2997 1.396zm-.3422-2.3142a.649.649 0 00-.7715.5l-.3573 1.6685c-1.1035.501-2.3285.7795-3.6193.7795a8.7368 8.7368 0 01-3.6951-.814l-.3574-1.6684a.648.648 0 00-.7714-.499l-1.473.3158a8.7216 8.7216 0 01-.7613-.898h7.1676c.081 0 .1356-.0141.1356-.088v-2.536c0-.074-.0536-.0881-.1356-.0881h-2.0966v-1.6077h2.2677c.2065 0 1.1065.0587 1.394 1.2088.0901.3533.2875 1.5044.4232 1.8729.1346.413.6833 1.2381 1.2685 1.2381h3.5716a.7492.7492 0 00.1296-.0131 8.7874 8.7874 0 01-.8119.9526zM6.8369 20.024a.714.714 0 11-.2997-1.396.714.714 0 01.2997 1.396zM4.1177 8.9972a.7137.7137 0 11-1.304.5791.7137.7137 0 011.304-.579zm-.8352 1.9813l1.5347-.6824a.65.65 0 00.33-.8585l-.3158-.7147h1.2432v5.6025H3.5669a8.7753 8.7753 0 01-.2834-3.348zm6.7343-.5437V8.7836h2.9601c.153 0 1.0792.1772 1.0792.8697 0 .575-.7107.7815-1.2948.7815zm10.7574 1.4862c0 .2187-.008.4363-.0243.651h-.9c-.09 0-.1265.0586-.1265.1477v.413c0 .973-.5487 1.1846-1.0296 1.2382-.4576.0517-.9648-.1913-1.0275-.4717-.2704-1.5186-.7198-1.8436-1.4305-2.4034.8817-.5599 1.799-1.386 1.799-2.4915 0-1.1936-.819-1.9458-1.3769-2.3153-.7825-.5163-1.6491-.6195-1.883-.6195H5.4682a8.7651 8.7651 0 014.907-2.7699l1.0974 1.151a.648.648 0 00.9182.0213l1.227-1.1743a8.7753 8.7753 0 016.0044 4.2762l-.8403 1.8982a.652.652 0 00.33.8585l1.6178.7188c.0283.2875.0425.577.0425.8717zm-9.3006-9.5993a.7128.7128 0 11.984 1.0316.7137.7137 0 01-.984-1.0316zm8.3389 6.71a.7107.7107 0 01.9395-.3625.7137.7137 0 11-.9405.3635z"/>
    </symbol>
    <!-- PostgreSQL official elephant (with fill-rule for eyes) -->
    <symbol id="icon-postgres" viewBox="0 0 24 24">
      <path fill-rule="evenodd" d="M23.5594 14.7228a.5269.5269 0 0 0-.0563-.1191c-.139-.2632-.4768-.3418-1.0074-.2321-1.6533.3411-2.2935.1312-2.5256-.0191 1.342-2.0482 2.445-4.522 3.0411-6.8297.2714-1.0507.7982-3.5237.1222-4.7316a1.5641 1.5641 0 0 0-.1509-.235C21.6931.9086 19.8007.0248 17.5099.0005c-1.4947-.0158-2.7705.3461-3.1161.4794a9.449 9.449 0 0 0-.5159-.0816 8.044 8.044 0 0 0-1.3114-.1278c-1.1822-.0184-2.2038.2642-3.0498.8406-.8573-.3211-4.7888-1.645-7.2219.0788C.9359 2.1526.3086 3.8733.4302 6.3043c.0409.818.5069 3.334 1.2423 5.7436.4598 1.5065.9387 2.7019 1.4334 3.582.553.9942 1.1259 1.5933 1.7143 1.7895.4474.1491 1.1327.1441 1.8581-.7279.8012-.9635 1.5903-1.8258 1.9446-2.2069.4351.2355.9064.3625 1.39.3772a.0569.0569 0 0 0 .0004.0041 11.0312 11.0312 0 0 0-.2472.3054c-.3389.4302-.4094.5197-1.5002.7443-.3102.064-1.1344.2339-1.1464.8115-.0025.1224.0329.2309.0919.3268.2269.4231.9216.6097 1.015.6331 1.3345.3335 2.5044.092 3.3714-.6787-.017 2.231.0775 4.4174.3454 5.0874.2212.5529.7618 1.9045 2.4692 1.9043.2505 0 .5263-.0291.8296-.0941 1.7819-.3821 2.5557-1.1696 2.855-2.9059.1503-.8707.4016-2.8753.5388-4.1012.0169-.0703.0357-.1207.057-.1362.0007-.0005.0697-.0471.4272.0307a.3673.3673 0 0 0 .0443.0068l.2539.0223.0149.001c.8468.0384 1.9114-.1426 2.5312-.4308.6438-.2988 1.8057-1.0323 1.5951-1.6698zM2.371 11.8765c-.7435-2.4358-1.1779-4.8851-1.2123-5.5719-.1086-2.1714.4171-3.6829 1.5623-4.4927 1.8367-1.2986 4.8398-.5408 6.108-.13-.0032.0032-.0066.0061-.0098.0094-2.0238 2.044-1.9758 5.536-1.9708 5.7495-.0002.0823.0066.1989.0162.3593.0348.5873.0996 1.6804-.0735 2.9184-.1609 1.1504.1937 2.2764.9728 3.0892.0806.0841.1648.1631.2518.2374-.3468.3714-1.1004 1.1926-1.9025 2.1576-.5677.6825-.9597.5517-1.0886.5087-.3919-.1307-.813-.5871-1.2381-1.3223-.4796-.839-.9635-2.0317-1.4155-3.5126zm6.0072 5.0871c-.1711-.0428-.3271-.1132-.4322-.1772.0889-.0394.2374-.0902.4833-.1409 1.2833-.2641 1.4815-.4506 1.9143-1.0002.0992-.126.2116-.2687.3673-.4426a.3549.3549 0 0 0 .0737-.1298c.1708-.1513.2724-.1099.4369-.0417.156.0646.3078.26.3695.4752.0291.1016.0619.2945-.0452.4444-.9043 1.2658-2.2216 1.2494-3.1676 1.0128zm2.094-3.988l-.0525.141c-.133.3566-.2567.6881-.3334 1.003-.6674-.0021-1.3168-.2872-1.8105-.8024-.6279-.6551-.9131-1.5664-.7825-2.5004.1828-1.3079.1153-2.4468.079-3.0586-.005-.0857-.0095-.1607-.0122-.2199.2957-.2621 1.6659-.9962 2.6429-.7724.4459.1022.7176.4057.8305.928.5846 2.7038.0774 3.8307-.3302 4.7363-.084.1866-.1633.3629-.2311.5454zm7.3637 4.5725c-.0169.1768-.0358.376-.0618.5959l-.146.4383a.3547.3547 0 0 0-.0182.1077c-.0059.4747-.054.6489-.115.8693-.0634.2292-.1353.4891-.1794 1.0575-.11 1.4143-.8782 2.2267-2.4172 2.5565-1.5155.3251-1.7843-.4968-2.0212-1.2217a6.5824 6.5824 0 0 0-.0769-.2266c-.2154-.5858-.1911-1.4119-.1574-2.5551.0165-.5612-.0249-1.9013-.3302-2.6462.0044-.2932.0106-.5909.019-.8918a.3529.3529 0 0 0-.0153-.1126 1.4927 1.4927 0 0 0-.0439-.208c-.1226-.4283-.4213-.7866-.7797-.9351-.1424-.059-.4038-.1672-.7178-.0869.067-.276.1831-.5875.309-.9249l.0529-.142c.0595-.16.134-.3257.213-.5012.4265-.9476 1.0106-2.2453.3766-5.1772-.2374-1.0981-1.0304-1.6343-2.2324-1.5098-.7207.0746-1.3799.3654-1.7088.5321a5.6716 5.6716 0 0 0-.1958.1041c.0918-1.1064.4386-3.1741 1.7357-4.4823a4.0306 4.0306 0 0 1 .3033-.276.3532.3532 0 0 0 .1447-.0644c.7524-.5706 1.6945-.8506 2.802-.8325.4091.0067.8017.0339 1.1742.081 1.939.3544 3.2439 1.4468 4.0359 2.3827.8143.9623 1.2552 1.9315 1.4312 2.4543-1.3232-.1346-2.2234.1268-2.6797.779-.9926 1.4189.543 4.1729 1.2811 5.4964.1353.2426.2522.4522.2889.5413.2403.5825.5515.9713.7787 1.2552.0696.087.1372.1714.1885.245-.4008.1155-1.1208.3825-1.0552 1.717-.0123.1563-.0423.4469-.0834.8148-.0461.2077-.0702.4603-.0994.7662zm.8905-1.6211c-.0405-.8316.2691-.9185.5967-1.0105a2.8566 2.8566 0 0 0 .135-.0406 1.202 1.202 0 0 0 .1342.103c.5703.3765 1.5823.4213 3.0068.1344-.2016.1769-.5189.3994-.9533.6011-.4098.1903-1.0957.333-1.7473.3636-.7197.0336-1.0859-.0807-1.1721-.151zm.5695-9.2712c-.0059.3508-.0542.6692-.1054 1.0017-.055.3576-.112.7274-.1264 1.1762-.0142.4368.0404.8909.0932 1.3301.1066.887.216 1.8003-.2075 2.7014a3.5272 3.5272 0 0 1-.1876-.3856c-.0527-.1276-.1669-.3326-.3251-.6162-.6156-1.1041-2.0574-3.6896-1.3193-4.7446.3795-.5427 1.3408-.5661 2.1781-.463zm.2284 7.0137a12.3762 12.3762 0 0 0-.0853-.1074l-.0355-.0444c.7262-1.1995.5842-2.3862.4578-3.4385-.0519-.4318-.1009-.8396-.0885-1.2226.0129-.4061.0666-.7543.1185-1.0911.0639-.415.1288-.8443.1109-1.3505.0134-.0531.0188-.1158.0118-.1902-.0457-.4855-.5999-1.938-1.7294-3.253-.6076-.7073-1.4896-1.4972-2.6889-2.0395.5251-.1066 1.2328-.2035 2.0244-.1859 2.0515.0456 3.6746.8135 4.8242 2.2824a.908.908 0 0 1 .0667.1002c.7231 1.3556-.2762 6.2751-2.9867 10.5405zm-8.8166-6.1162c-.025.1794-.3089.4225-.6211.4225a.5821.5821 0 0 1-.0809-.0056c-.1873-.026-.3765-.144-.5059-.3156-.0458-.0605-.1203-.178-.1055-.2844.0055-.0401.0261-.0985.0925-.1488.1182-.0894.3518-.1226.6096-.0867.3163.0441.6426.1938.6113.4186zm7.9305-.4114c.0111.0792-.049.201-.1531.3102-.0683.0717-.212.1961-.4079.2232a.5456.5456 0 0 1-.075.0052c-.2935 0-.5414-.2344-.5607-.3717-.024-.1765.2641-.3106.5611-.352.297-.0414.6111.0088.6356.1851z"/>
    </symbol>
    <!-- Apache Kafka official logo -->
    <symbol id="icon-kafka" viewBox="0 0 24 24">
      <path d="M9.71 2.136a1.43 1.43 0 0 0-2.047 0h-.007a1.48 1.48 0 0 0-.421 1.042c0 .41.161.777.422 1.039l.007.007c.257.264.616.426 1.019.426.404 0 .766-.162 1.027-.426l.003-.007c.261-.262.421-.629.421-1.039 0-.408-.159-.777-.421-1.042H9.71zM8.683 22.295c.404 0 .766-.167 1.027-.429l.003-.008c.261-.261.421-.631.421-1.036 0-.41-.159-.778-.421-1.044H9.71a1.42 1.42 0 0 0-1.027-.432 1.4 1.4 0 0 0-1.02.432h-.007c-.26.266-.422.634-.422 1.044 0 .406.161.775.422 1.036l.007.008c.258.262.617.429 1.02.429zm7.89-4.462c.359-.096.683-.33.882-.684l.027-.052a1.47 1.47 0 0 0 .114-1.067 1.454 1.454 0 0 0-.675-.896l-.021-.014a1.425 1.425 0 0 0-1.078-.132c-.36.091-.684.335-.881.686-.2.349-.241.75-.146 1.119.099.363.33.691.675.896h.002c.346.203.737.239 1.101.144zm-6.405-7.342a2.083 2.083 0 0 0-1.485-.627c-.58 0-1.103.242-1.482.627-.378.385-.612.916-.612 1.507s.233 1.124.612 1.514a2.08 2.08 0 0 0 2.967 0c.379-.39.612-.923.612-1.514s-.233-1.122-.612-1.507zm-.835-2.51c.843.141 1.6.552 2.178 1.144h.004c.092.093.182.196.265.299l1.446-.851a3.176 3.176 0 0 1-.047-1.808 3.149 3.149 0 0 1 1.456-1.926l.025-.016a3.062 3.062 0 0 1 2.345-.306c.77.21 1.465.721 1.898 1.482v.002c.431.757.518 1.626.313 2.408a3.145 3.145 0 0 1-1.456 1.928l-.198.118h-.02a3.095 3.095 0 0 1-2.154.201 3.127 3.127 0 0 1-1.514-.944l-1.444.848a4.162 4.162 0 0 1 0 2.879l1.444.846c.413-.47.939-.789 1.514-.944a3.041 3.041 0 0 1 2.371.319l.048.023v.002a3.17 3.17 0 0 1 1.408 1.906 3.215 3.215 0 0 1-.313 2.405l-.026.053-.003-.005a3.147 3.147 0 0 1-1.867 1.436 3.096 3.096 0 0 1-2.371-.318v-.006a3.156 3.156 0 0 1-1.456-1.927 3.175 3.175 0 0 1 .047-1.805l-1.446-.848a3.905 3.905 0 0 1-.265.294l-.004.005a3.938 3.938 0 0 1-2.178 1.138v1.699a3.09 3.09 0 0 1 1.56.862l.002.004c.565.572.914 1.368.914 2.243 0 .873-.35 1.664-.914 2.239l-.002.009a3.1 3.1 0 0 1-2.21.931 3.1 3.1 0 0 1-2.206-.93h-.002v-.009a3.186 3.186 0 0 1-.916-2.239c0-.875.35-1.672.916-2.243v-.004h.002a3.1 3.1 0 0 1 1.558-.862v-1.699a3.926 3.926 0 0 1-2.176-1.138l-.006-.005a4.098 4.098 0 0 1-1.173-2.874c0-1.122.452-2.136 1.173-2.872h.006a3.947 3.947 0 0 1 2.176-1.144V6.289a3.137 3.137 0 0 1-1.558-.864h-.002v-.004a3.192 3.192 0 0 1-.916-2.243c0-.871.35-1.669.916-2.243l.002-.002A3.084 3.084 0 0 1 8.683 0c.861 0 1.641.355 2.21.932v.002h.002c.565.574.914 1.372.914 2.243 0 .876-.35 1.667-.914 2.243l-.002.005a3.142 3.142 0 0 1-1.56.864v1.692zm8.121-1.129l-.012-.019a1.452 1.452 0 0 0-.87-.668 1.43 1.43 0 0 0-1.103.146h.002c-.347.2-.58.529-.677.896-.095.365-.054.768.146 1.119l.007.009c.2.347.519.579.874.673.357.103.755.059 1.098-.144l.019-.009a1.47 1.47 0 0 0 .657-.885 1.493 1.493 0 0 0-.141-1.118"/>
    </symbol>
    <!-- MySQL official dolphin -->
    <symbol id="icon-mysql" viewBox="0 0 24 24">
      <path d="M16.405 5.501c-.115 0-.193.014-.274.033v.013h.014c.054.104.146.18.214.273.054.107.1.214.154.32l.014-.015c.094-.066.14-.172.14-.333-.04-.047-.046-.094-.08-.14-.04-.067-.126-.1-.18-.153zM5.77 18.695h-.927a50.854 50.854 0 00-.27-4.41h-.008l-1.41 4.41H2.45l-1.4-4.41h-.01a72.892 72.892 0 00-.195 4.41H0c.055-1.966.192-3.81.41-5.53h1.15l1.335 4.064h.008l1.347-4.064h1.095c.242 2.015.384 3.86.428 5.53zm4.017-4.08c-.378 2.045-.876 3.533-1.492 4.46-.482.716-1.01 1.073-1.583 1.073-.153 0-.34-.046-.566-.138v-.494c.11.017.24.026.386.026.268 0 .483-.075.647-.222.197-.18.295-.382.295-.605 0-.155-.077-.47-.23-.944L6.23 14.615h.91l.727 2.36c.164.536.233.91.205 1.123.4-1.064.678-2.227.835-3.483zm12.325 4.08h-2.63v-5.53h.885v4.85h1.745zm-3.32.135l-1.016-.5c.09-.076.177-.158.255-.25.433-.506.648-1.258.648-2.253 0-1.83-.718-2.746-2.155-2.746-.704 0-1.254.232-1.65.697-.43.508-.646 1.256-.646 2.245 0 .972.19 1.686.574 2.14.35.41.877.615 1.583.615.264 0 .506-.033.725-.098l1.325.772.36-.622zM15.5 17.588c-.225-.36-.337-.94-.337-1.736 0-1.393.424-2.09 1.27-2.09.443 0 .77.167.977.5.224.362.336.936.336 1.723 0 1.404-.424 2.108-1.27 2.108-.445 0-.77-.167-.978-.5zm-1.658-.425c0 .47-.172.856-.516 1.156-.344.3-.803.45-1.384.45-.543 0-1.064-.172-1.573-.515l.237-.476c.438.22.833.328 1.19.328.332 0 .593-.073.783-.22a.754.754 0 00.3-.615c0-.33-.23-.61-.648-.845-.388-.213-1.163-.657-1.163-.657-.422-.307-.632-.636-.632-1.177 0-.45.157-.81.47-1.085.315-.278.72-.415 1.22-.415.512 0 .98.136 1.4.41l-.213.476a2.726 2.726 0 00-1.064-.23c-.283 0-.502.068-.654.206a.685.685 0 00-.248.524c0 .328.234.61.666.85.393.215 1.187.67 1.187.67.433.305.648.63.648 1.168zm9.382-5.852c-.535-.014-.95.04-1.297.188-.1.04-.26.04-.274.167.055.053.063.14.11.214.08.134.218.313.346.407.14.11.28.216.427.31.26.16.555.255.81.416.145.094.293.213.44.313.073.05.12.14.214.172v-.02c-.046-.06-.06-.147-.105-.214-.067-.067-.134-.127-.2-.193a3.223 3.223 0 00-.695-.675c-.214-.146-.682-.35-.77-.595l-.013-.014c.146-.013.32-.066.46-.106.227-.06.435-.047.67-.106.106-.027.213-.06.32-.094v-.06c-.12-.12-.21-.283-.334-.395a8.867 8.867 0 00-1.104-.823c-.21-.134-.476-.22-.697-.334-.08-.04-.214-.06-.26-.127-.12-.146-.19-.34-.275-.514a17.69 17.69 0 01-.547-1.163c-.12-.262-.193-.523-.34-.763-.69-1.137-1.437-1.826-2.586-2.5-.247-.14-.543-.2-.856-.274-.167-.008-.334-.02-.5-.027-.11-.047-.216-.174-.31-.235-.38-.24-1.364-.76-1.644-.072-.18.434.267.862.422 1.082.115.153.26.328.34.5.047.116.06.235.107.356.106.294.207.622.347.897.073.14.153.287.247.413.054.073.146.107.167.227-.094.136-.1.334-.154.5-.24.757-.146 1.693.194 2.25.107.166.362.534.703.393.3-.12.234-.5.32-.835.02-.08.007-.133.048-.187v.015c.094.188.188.367.274.555.206.328.566.668.867.895.16.12.287.328.487.402v-.02h-.015c-.043-.058-.1-.086-.154-.133a3.445 3.445 0 01-.35-.4 8.76 8.76 0 01-.747-1.218c-.11-.21-.202-.436-.29-.643-.04-.08-.04-.2-.107-.24-.1.146-.247.273-.32.453-.127.288-.14.642-.188 1.01-.027.007-.014 0-.027.014-.214-.052-.287-.274-.367-.46-.2-.475-.233-1.238-.06-1.785.047-.14.247-.582.167-.716-.042-.127-.174-.2-.247-.303a2.478 2.478 0 01-.24-.427c-.16-.374-.24-.788-.414-1.162-.08-.173-.22-.354-.334-.513-.127-.18-.267-.307-.368-.52-.033-.073-.08-.194-.027-.274.014-.054.042-.075.094-.09.088-.072.335.022.422.062.247.1.455.194.662.334.094.066.195.193.315.226h.14c.214.047.455.014.655.073.355.114.675.28.962.46a5.953 5.953 0 012.085 2.286c.08.154.115.295.188.455.14.33.313.663.455.982.14.315.275.636.476.897.1.14.502.213.682.286.133.06.34.115.46.188.23.14.454.3.67.454.11.076.443.243.463.378z"/>
    </symbol>
    <!-- Mobile device icon -->
    <symbol id="icon-mobile" viewBox="0 0 384 512">
      <path d="M80 0C44.7 0 16 28.7 16 64V448c0 35.3 28.7 64 64 64H304c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H80zm80 432h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H160c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/>
    </symbol>
    <!-- Server/database icon -->
    <symbol id="icon-server" viewBox="0 0 512 512">
      <path d="M64 32C28.7 32 0 60.7 0 96v64c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm48 24a24 24 0 1 1 48 0 24 24 0 1 1-48 0zM64 288c-35.3 0-64 28.7-64 64v64c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V352c0-35.3-28.7-64-64-64H64zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm48 24a24 24 0 1 1 48 0 24 24 0 1 1-48 0z"/>
    </symbol>
    <!-- Globe/browser icon -->
    <symbol id="icon-globe" viewBox="0 0 512 512">
      <path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64H348.7c2.2 20.4 3.3 41.8 3.3 64zm28.8-64H503.9c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 20.9 58.2 27 94.7zm-209 0H18.6C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192H131.2c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6H344.3c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352H135.3zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6H493.4z"/>
    </symbol>
    <!-- WiFi/network icon -->
    <symbol id="icon-wifi" viewBox="0 0 640 512">
      <path d="M54.2 202.9C123.2 136.7 216.8 96 320 96s196.8 40.7 265.8 106.9c12.8 12.2 33 11.8 45.2-1s11.8-33-1-45.2C549.7 79.5 440.4 32 320 32S90.3 79.5 9.8 156.7c-12.7 12.2-13.1 32.4-.9 45.2 12.2 12.8 32.4 13.2 45.3 1zM320 256c57.2 0 110.1 19.6 151.6 52.5c12.5 9.9 30.8 7.8 40.7-4.7s7.8-30.8-4.7-40.7C462.9 228.3 393.7 192 320 192s-142.9 36.3-187.6 71.1c-12.5 9.9-14.6 28.2-4.7 40.7s28.2 14.6 40.7 4.7C209.9 275.6 262.8 256 320 256zm0 128c-35.3 0-64 28.7-64 64s28.7 64 64 64s64-28.7 64-64s-28.7-64-64-64z"/>
    </symbol>
    <!-- Filter/funnel icon -->
    <symbol id="icon-filter" viewBox="0 0 512 512">
      <path d="M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"/>
    </symbol>
    <!-- Microchip/IoT icon -->
    <symbol id="icon-microchip" viewBox="0 0 512 512">
      <path d="M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64c-35.3 0-64 28.7-64 64H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H64v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H64v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H64c0 35.3 28.7 64 64 64v40c0 13.3 10.7 24 24 24s24-10.7 24-24V448h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24V448h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24V448c35.3 0 64-28.7 64-64h40c13.3 0 24-10.7 24-24s-10.7-24-24-24H448V280h40c13.3 0 24-10.7 24-24s-10.7-24-24-24H448V176h40c13.3 0 24-10.7 24-24s-10.7-24-24-24H448c0-35.3-28.7-64-64-64V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H280V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H176V24zM160 128H352c17.7 0 32 14.3 32 32V352c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32zm32 64v128c0 8.8 7.2 16 16 16H304c8.8 0 16-7.2 16-16V192c0-8.8-7.2-16-16-16H208c-8.8 0-16 7.2-16 16z"/>
    </symbol>
    <!-- SQLite database icon -->
    <symbol id="icon-database" viewBox="0 0 448 512">
      <path d="M448 80v48c0 44.2-100.3 80-224 80S0 172.2 0 128V80C0 35.8 100.3 0 224 0S448 35.8 448 80zM393.2 214.7c20.8-7.4 39.9-16.9 54.8-28.6V288c0 44.2-100.3 80-224 80S0 332.2 0 288V186.1c14.9 11.8 34 21.2 54.8 28.6C99.7 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zM0 346.1c14.9 11.8 34 21.2 54.8 28.6C99.7 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c20.8-7.4 39.9-16.9 54.8-28.6V432c0 44.2-100.3 80-224 80S0 476.2 0 432V346.1z"/>
    </symbol>
    <!-- Arrow right icon -->
    <symbol id="icon-arrow-right" viewBox="0 0 448 512">
      <path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/>
    </symbol>
  </defs>

  <style>
    text { font-family: 'Inter', 'SF Pro Display', system-ui, sans-serif; }
    .mono { font-family: 'SF Mono', 'JetBrains Mono', 'Consolas', monospace; }
    .title { font-size: 24px; font-weight: 700; fill: #fff; letter-spacing: -0.5px; }
    .subtitle { font-size: 13px; fill: rgba(255,255,255,0.9); }
    .section-title { font-size: 14px; font-weight: 700; fill: #1e293b; letter-spacing: -0.3px; }
    .body { font-size: 11px; fill: #475569; line-height: 1.4; }
    .label { font-size: 10px; fill: #64748b; }
    .value { font-size: 10px; fill: #1e293b; font-weight: 600; }
    .small { font-size: 9px; fill: #64748b; }
    .tiny { font-size: 8px; fill: #94a3b8; }
  </style>

  <!-- Background -->
  <rect width="900" height="2040" fill="#f8fafc"/>

  <!-- Header -->
  <rect width="900" height="100" fill="url(#header-grad)"/>
  <text x="450" y="32" text-anchor="middle" class="title">SQLite Changeset &amp; Patchset Format</text>
  <text x="450" y="52" text-anchor="middle" class="subtitle">Binary wire format for database change synchronization</text>
  <text x="450" y="72" text-anchor="middle" font-size="11" fill="rgba(255,255,255,0.8)">Format specification: SQLite 3.9.0 (October 2015)</text>
  <text x="450" y="88" text-anchor="middle" font-size="10" fill="rgba(255,255,255,0.6)">sqlite-diff-rs: Pure Rust implementation (February 2026) — github.com/LucaCappelletti94/sqlite-diff-rs</text>

  <!-- Overview Section -->
  <g transform="translate(32, 118)">
    <text x="0" y="0" class="section-title">Overview</text>
    <rect x="0" y="12" width="836" height="82" rx="6" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
    <foreignObject x="16" y="20" width="804" height="68">
      <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: Inter, SF Pro Display, system-ui, sans-serif; font-size: 11px; color: #475569; text-align: justify; line-height: 1.4;">
        SQLite's session extension defines two binary formats for database mutations: <strong>changesets</strong> (<em>reversible</em>, full old/new state) and <strong>patchsets</strong> (<em>compact</em>, forward-only). Unlike Protobuf, CBOR, or JSON schemas, these formats require <strong>no application-layer struct definitions</strong> — the binary is directly applicable via <code style="font-family: monospace; background: #f1f5f9; padding: 1px 3px; border-radius: 2px;">sqlite3changeset_apply()</code>. <em>No codegen, no version compatibility issues, no SQL injection vectors.</em> The session extension is included in SQLite amalgamation but can be compiled out with SQLITE_OMIT_SESSION.
      </div>
    </foreignObject>
  </g>

  <!-- Architecture / Data Flow Section -->
  <g transform="translate(32, 230)">
    <text x="0" y="0" class="section-title">Architecture — CDC to Edge SQLite Pipeline</text>

    <g transform="translate(0, 18)">
      <rect width="836" height="160" rx="6" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>

      <!-- Element spacing: 5 elements of 130px each = 650px, 4 gaps of 30px = 120px, margins = 66px total (33px each side) -->
      <!-- Positions: 33, 193, 353, 513, 673 (centered within 836px box) -->

      <!-- Data Sources -->
      <g transform="translate(33, 20)">
        <text x="65" y="-4" text-anchor="middle" class="label" font-weight="700" fill="#5b21b6">Data Sources</text>

        <!-- PostgreSQL -->
        <g transform="translate(0, 6)">
          <rect width="130" height="32" rx="3" fill="#f5f3ff" stroke="#c4b5fd"/>
          <use href="#icon-postgres" x="6" y="6" width="18" height="18" fill="#5b21b6"/>
          <text x="28" y="14" class="tiny" font-weight="600" fill="#5b21b6">PostgreSQL</text>
          <text x="28" y="24" class="tiny" fill="#7c3aed">wal2json, pg_walstream</text>
        </g>

        <!-- MySQL -->
        <g transform="translate(0, 44)">
          <rect width="130" height="32" rx="3" fill="#fef3c7" stroke="#fcd34d"/>
          <use href="#icon-mysql" x="6" y="6" width="18" height="18" fill="#b45309"/>
          <text x="28" y="14" class="tiny" font-weight="600" fill="#b45309">MySQL</text>
          <text x="28" y="24" class="tiny" fill="#d97706">Maxwell</text>
        </g>

        <!-- Kafka -->
        <g transform="translate(0, 82)">
          <rect width="130" height="32" rx="3" fill="#fef2f2" stroke="#fecaca"/>
          <use href="#icon-kafka" x="6" y="6" width="18" height="18" fill="#991b1b"/>
          <text x="28" y="14" class="tiny" font-weight="600" fill="#991b1b">Kafka</text>
          <text x="28" y="24" class="tiny" fill="#dc2626">Debezium</text>
        </g>
      </g>

      <!-- Arrow 1 -->
      <g transform="translate(171, 75)">
        <use href="#icon-arrow-right" x="0" y="0" width="16" height="16" fill="#94a3b8"/>
      </g>

      <!-- Filter/Auth step (external) -->
      <g transform="translate(193, 20)">
        <text x="65" y="-4" text-anchor="middle" class="label" font-weight="700" fill="#64748b">Filter / Auth</text>
        <rect width="130" height="118" rx="4" fill="#f8fafc" stroke="#cbd5e1" stroke-dasharray="4 2"/>
        <use href="#icon-filter" x="52" y="10" width="26" height="26" fill="#94a3b8"/>
        <text x="65" y="52" text-anchor="middle" class="tiny" fill="#64748b">Zanzibar / SpiceDB</text>
        <text x="65" y="66" text-anchor="middle" class="tiny" fill="#64748b">DataFusion subs</text>
        <text x="65" y="80" text-anchor="middle" class="tiny" fill="#64748b">Per-user filtering</text>
        <rect x="10" y="90" width="110" height="22" rx="3" fill="#f1f5f9" stroke="#e2e8f0"/>
        <text x="65" y="104" text-anchor="middle" class="tiny" fill="#94a3b8" font-style="italic">Not in this crate</text>
      </g>

      <!-- Arrow 2 -->
      <g transform="translate(331, 75)">
        <use href="#icon-arrow-right" x="0" y="0" width="16" height="16" fill="#94a3b8"/>
      </g>

      <!-- sqlite-diff-rs (center) -->
      <g transform="translate(353, 20)">
        <text x="65" y="-4" text-anchor="middle" class="label" font-weight="700" fill="#4f46e5">Converter</text>
        <rect width="130" height="118" rx="6" fill="#eef2ff" stroke="#818cf8" stroke-width="2"/>
        <use href="#icon-rust" x="50" y="8" width="30" height="30" fill="#4f46e5"/>
        <text x="65" y="52" text-anchor="middle" font-size="11" font-weight="700" fill="#4338ca">sqlite-diff-rs</text>
        <text x="65" y="66" text-anchor="middle" class="tiny" fill="#6366f1">CDC → Patchset</text>
        <rect x="8" y="76" width="114" height="34" rx="4" fill="#c7d2fe"/>
        <text x="65" y="90" text-anchor="middle" class="mono tiny" fill="#4338ca">PatchSet::new()</text>
        <text x="65" y="102" text-anchor="middle" class="mono tiny" fill="#4338ca">.insert(...)</text>
      </g>

      <!-- Arrow 3 -->
      <g transform="translate(491, 75)">
        <use href="#icon-arrow-right" x="0" y="0" width="16" height="16" fill="#94a3b8"/>
      </g>

      <!-- Transport (WebSocket) -->
      <g transform="translate(513, 20)">
        <text x="65" y="-4" text-anchor="middle" class="label" font-weight="700" fill="#0369a1">Transport</text>
        <rect width="130" height="118" rx="4" fill="#f0f9ff" stroke="#7dd3fc"/>
        <use href="#icon-wifi" x="52" y="10" width="26" height="26" fill="#0284c7"/>
        <text x="65" y="52" text-anchor="middle" class="small" font-weight="600" fill="#0369a1">WebSocket</text>
        <text x="65" y="66" text-anchor="middle" class="tiny" fill="#0ea5e9">Binary frames</text>
        <text x="65" y="80" text-anchor="middle" class="tiny" fill="#0ea5e9">Real-time push</text>
        <rect x="25" y="90" width="80" height="20" rx="2" fill="#bae6fd"/>
        <text x="65" y="104" text-anchor="middle" class="mono tiny" fill="#0369a1">0x50 ...</text>
      </g>

      <!-- Arrow 4 -->
      <g transform="translate(651, 75)">
        <use href="#icon-arrow-right" x="0" y="0" width="16" height="16" fill="#94a3b8"/>
      </g>

      <!-- Edge SQLite (right) -->
      <g transform="translate(673, 20)">
        <text x="65" y="-4" text-anchor="middle" class="label" font-weight="700" fill="#059669">Edge SQLite</text>
        <rect width="130" height="118" rx="4" fill="#ecfdf5" stroke="#86efac"/>

        <!-- Device icons row -->
        <g transform="translate(8, 8)">
          <rect width="34" height="36" rx="3" fill="#d1fae5" stroke="#6ee7b7"/>
          <use href="#icon-mobile" x="7" y="4" width="20" height="20" fill="#059669"/>
          <text x="17" y="32" text-anchor="middle" class="tiny" fill="#047857">Mobile</text>
        </g>
        <g transform="translate(48, 8)">
          <rect width="34" height="36" rx="3" fill="#d1fae5" stroke="#6ee7b7"/>
          <use href="#icon-microchip" x="7" y="4" width="20" height="20" fill="#059669"/>
          <text x="17" y="32" text-anchor="middle" class="tiny" fill="#047857">IoT</text>
        </g>
        <g transform="translate(88, 8)">
          <rect width="34" height="36" rx="3" fill="#d1fae5" stroke="#6ee7b7"/>
          <use href="#icon-globe" x="7" y="4" width="20" height="20" fill="#059669"/>
          <text x="17" y="32" text-anchor="middle" class="tiny" fill="#047857">WASM</text>
        </g>

        <!-- Apply box -->
        <g transform="translate(8, 52)">
          <rect width="114" height="58" rx="4" fill="#fff" stroke="#86efac"/>
          <use href="#icon-database" x="4" y="4" width="14" height="14" fill="#059669"/>
          <text x="22" y="14" class="tiny" font-weight="600" fill="#047857">changeset_apply()</text>
          <text x="4" y="30" class="tiny" fill="#059669">Direct binary</text>
          <text x="4" y="42" class="tiny" fill="#059669">No SQL parsing</text>
          <text x="4" y="54" class="tiny" fill="#059669">No injection risk</text>
        </g>
      </g>
    </g>
  </g>

  <!-- Binary Format Structure -->
  <g transform="translate(32, 430)">
    <text x="0" y="0" class="section-title">Binary Format Structure</text>

    <!-- Changeset Panel -->
    <g transform="translate(0, 18)">
      <rect width="320" height="200" rx="6" fill="#fff" stroke="#3b82f6" stroke-width="1.5"/>
      <rect width="320" height="28" rx="6" fill="#3b82f6"/>
      <rect y="22" width="320" height="6" fill="#3b82f6"/>
      <text x="160" y="19" text-anchor="middle" font-size="12" font-weight="600" fill="#fff">CHANGESET (0x54 = 'T')</text>

      <g transform="translate(12, 44)">
        <text x="0" y="0" class="label" font-weight="600">Table Header</text>
        <g transform="translate(0, 10)">
          <rect width="28" height="16" rx="2" fill="#dbeafe" stroke="#93c5fd"/>
          <text x="14" y="11" text-anchor="middle" class="mono tiny" fill="#1e40af">'T'</text>
          <rect x="32" width="32" height="16" rx="2" fill="#dbeafe" stroke="#93c5fd"/>
          <text x="48" y="11" text-anchor="middle" class="mono tiny" fill="#1e40af">nCol</text>
          <rect x="68" width="50" height="16" rx="2" fill="#dbeafe" stroke="#93c5fd"/>
          <text x="93" y="11" text-anchor="middle" class="mono tiny" fill="#1e40af">pk_flags</text>
          <rect x="122" width="162" height="16" rx="2" fill="#dbeafe" stroke="#93c5fd"/>
          <text x="203" y="11" text-anchor="middle" class="mono tiny" fill="#1e40af">table_name\0</text>
        </g>

        <text x="0" y="44" class="label" font-weight="600" fill="#16a34a">INSERT (0x12)</text>
        <g transform="translate(0, 54)">
          <rect width="28" height="14" rx="2" fill="#dcfce7" stroke="#86efac"/>
          <text x="14" y="10" text-anchor="middle" class="mono tiny" fill="#166534">0x12</text>
          <rect x="32" width="28" height="14" rx="2" fill="#dcfce7" stroke="#86efac"/>
          <text x="46" y="10" text-anchor="middle" class="mono tiny" fill="#166534">0x00</text>
          <rect x="64" width="220" height="14" rx="2" fill="#f0fdf4" stroke="#86efac"/>
          <text x="174" y="10" text-anchor="middle" class="tiny" fill="#166534">new_values[0..N] — all cols</text>
        </g>

        <text x="0" y="84" class="label" font-weight="600" fill="#dc2626">DELETE (0x09)</text>
        <g transform="translate(0, 94)">
          <rect width="28" height="14" rx="2" fill="#fee2e2" stroke="#fca5a5"/>
          <text x="14" y="10" text-anchor="middle" class="mono tiny" fill="#991b1b">0x09</text>
          <rect x="32" width="28" height="14" rx="2" fill="#fee2e2" stroke="#fca5a5"/>
          <text x="46" y="10" text-anchor="middle" class="mono tiny" fill="#991b1b">0x00</text>
          <rect x="64" width="220" height="14" rx="2" fill="#fef2f2" stroke="#fca5a5"/>
          <text x="174" y="10" text-anchor="middle" class="tiny" fill="#991b1b">old_values[0..N] — all cols</text>
        </g>

        <text x="0" y="124" class="label" font-weight="600" fill="#ea580c">UPDATE (0x17)</text>
        <g transform="translate(0, 134)">
          <rect width="28" height="14" rx="2" fill="#ffedd5" stroke="#fdba74"/>
          <text x="14" y="10" text-anchor="middle" class="mono tiny" fill="#9a3412">0x17</text>
          <rect x="32" width="28" height="14" rx="2" fill="#ffedd5" stroke="#fdba74"/>
          <text x="46" y="10" text-anchor="middle" class="mono tiny" fill="#9a3412">0x00</text>
          <rect x="64" width="110" height="14" rx="2" fill="#fff7ed" stroke="#fdba74"/>
          <text x="119" y="10" text-anchor="middle" class="tiny" fill="#9a3412">old[0..N]</text>
          <rect x="178" width="106" height="14" rx="2" fill="#fffbeb" stroke="#fde68a"/>
          <text x="231" y="10" text-anchor="middle" class="tiny" fill="#9a3412">new[0..N]</text>
        </g>
      </g>
    </g>

    <!-- Patchset Panel -->
    <g transform="translate(336, 18)">
      <rect width="320" height="200" rx="6" fill="#fff" stroke="#16a34a" stroke-width="1.5"/>
      <rect width="320" height="28" rx="6" fill="#16a34a"/>
      <rect y="22" width="320" height="6" fill="#16a34a"/>
      <text x="160" y="19" text-anchor="middle" font-size="12" font-weight="600" fill="#fff">PATCHSET (0x50 = 'P')</text>

      <g transform="translate(12, 44)">
        <text x="0" y="0" class="label" font-weight="600">Table Header (identical)</text>
        <g transform="translate(0, 10)">
          <rect width="28" height="16" rx="2" fill="#dcfce7" stroke="#86efac"/>
          <text x="14" y="11" text-anchor="middle" class="mono tiny" fill="#166534">'P'</text>
          <rect x="32" width="32" height="16" rx="2" fill="#dcfce7" stroke="#86efac"/>
          <text x="48" y="11" text-anchor="middle" class="mono tiny" fill="#166534">nCol</text>
          <rect x="68" width="50" height="16" rx="2" fill="#dcfce7" stroke="#86efac"/>
          <text x="93" y="11" text-anchor="middle" class="mono tiny" fill="#166534">pk_flags</text>
          <rect x="122" width="162" height="16" rx="2" fill="#dcfce7" stroke="#86efac"/>
          <text x="203" y="11" text-anchor="middle" class="mono tiny" fill="#166534">table_name\0</text>
        </g>

        <text x="0" y="44" class="label" font-weight="600" fill="#16a34a">INSERT (0x12) — identical</text>
        <g transform="translate(0, 54)">
          <rect width="28" height="14" rx="2" fill="#dcfce7" stroke="#86efac"/>
          <text x="14" y="10" text-anchor="middle" class="mono tiny" fill="#166534">0x12</text>
          <rect x="32" width="28" height="14" rx="2" fill="#dcfce7" stroke="#86efac"/>
          <text x="46" y="10" text-anchor="middle" class="mono tiny" fill="#166534">0x00</text>
          <rect x="64" width="220" height="14" rx="2" fill="#f0fdf4" stroke="#86efac"/>
          <text x="174" y="10" text-anchor="middle" class="tiny" fill="#166534">new_values[0..N] — all cols</text>
        </g>

        <text x="0" y="84" class="label" font-weight="600" fill="#dc2626">DELETE (0x09) — PK only</text>
        <g transform="translate(0, 94)">
          <rect width="28" height="14" rx="2" fill="#fee2e2" stroke="#fca5a5"/>
          <text x="14" y="10" text-anchor="middle" class="mono tiny" fill="#991b1b">0x09</text>
          <rect x="32" width="28" height="14" rx="2" fill="#fee2e2" stroke="#fca5a5"/>
          <text x="46" y="10" text-anchor="middle" class="mono tiny" fill="#991b1b">0x00</text>
          <rect x="64" width="100" height="14" rx="2" fill="#fef2f2" stroke="#fca5a5"/>
          <text x="114" y="10" text-anchor="middle" class="tiny" fill="#991b1b">pk_values[]</text>
          <rect x="168" width="116" height="14" rx="2" fill="#fafafa" stroke="#d4d4d4" stroke-dasharray="2 1"/>
          <text x="226" y="10" text-anchor="middle" class="tiny" fill="#a3a3a3" font-style="italic">omitted</text>
        </g>

        <text x="0" y="124" class="label" font-weight="600" fill="#ea580c">UPDATE (0x17) — sparse</text>
        <g transform="translate(0, 134)">
          <rect width="28" height="14" rx="2" fill="#ffedd5" stroke="#fdba74"/>
          <text x="14" y="10" text-anchor="middle" class="mono tiny" fill="#9a3412">0x17</text>
          <rect x="32" width="28" height="14" rx="2" fill="#ffedd5" stroke="#fdba74"/>
          <text x="46" y="10" text-anchor="middle" class="mono tiny" fill="#9a3412">0x00</text>
          <rect x="64" width="110" height="14" rx="2" fill="#fff7ed" stroke="#fdba74"/>
          <text x="119" y="10" text-anchor="middle" class="tiny" fill="#9a3412">PK + undef</text>
          <rect x="178" width="106" height="14" rx="2" fill="#fffbeb" stroke="#fde68a"/>
          <text x="231" y="10" text-anchor="middle" class="tiny" fill="#9a3412">changed</text>
        </g>
      </g>
    </g>

    <!-- Value encoding legend - RIGHT SIDE -->
    <g transform="translate(672, 18)">
      <rect width="164" height="200" rx="6" fill="#334155"/>
      <text x="82" y="22" text-anchor="middle" font-size="10" font-weight="600" fill="#e2e8f0">Value Types</text>
      <g transform="translate(16, 40)">
        <text x="0" y="0" class="mono tiny" fill="#94a3b8">0x00</text>
        <text x="36" y="0" class="tiny" fill="#cbd5e1">undefined</text>
        <text x="0" y="20" class="mono tiny" fill="#94a3b8">0x01</text>
        <text x="36" y="20" class="tiny" fill="#cbd5e1">INT64</text>
        <text x="0" y="40" class="mono tiny" fill="#94a3b8">0x02</text>
        <text x="36" y="40" class="tiny" fill="#cbd5e1">FLOAT64</text>
        <text x="0" y="60" class="mono tiny" fill="#94a3b8">0x03</text>
        <text x="36" y="60" class="tiny" fill="#cbd5e1">TEXT (varint len)</text>
        <text x="0" y="80" class="mono tiny" fill="#94a3b8">0x04</text>
        <text x="36" y="80" class="tiny" fill="#cbd5e1">BLOB (varint len)</text>
        <text x="0" y="100" class="mono tiny" fill="#94a3b8">0x05</text>
        <text x="36" y="100" class="tiny" fill="#cbd5e1">NULL</text>
      </g>
      <line x1="16" y1="170" x2="148" y2="170" stroke="#475569"/>
      <text x="82" y="188" text-anchor="middle" class="tiny" fill="#94a3b8">SQLite serial types</text>
    </g>
  </g>

  <!-- Payload Size Section -->
  <g transform="translate(32, 680)">
    <text x="0" y="0" class="section-title">Payload Size — 1,000 Operations (60% INSERT, 25% UPDATE, 15% DELETE)</text>

    <!-- Main table -->
    <g transform="translate(0, 18)">
      <rect width="500" height="188" rx="6" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>

      <!-- Header -->
      <rect width="500" height="26" rx="6" fill="#f1f5f9"/>
      <rect y="20" width="500" height="6" fill="#f1f5f9"/>
      <text x="20" y="17" class="label" font-weight="600">Format</text>
      <text x="180" y="17" class="label" font-weight="600" text-anchor="end">Uncompressed</text>
      <text x="270" y="17" class="label" font-weight="600" text-anchor="end">Overhead</text>
      <text x="380" y="17" class="label" font-weight="600" text-anchor="end">Zstd Compressed</text>
      <text x="470" y="17" class="label" font-weight="600" text-anchor="end">Ratio</text>

      <!-- Raw baseline -->
      <g transform="translate(0, 38)">
        <text x="20" y="10" class="small">Raw content (baseline)</text>
        <text x="180" y="10" class="mono small" text-anchor="end">522,830</text>
        <text x="270" y="10" class="small" text-anchor="end" fill="#64748b">—</text>
        <text x="380" y="10" class="small" text-anchor="end" fill="#64748b">—</text>
        <text x="470" y="10" class="small" text-anchor="end" fill="#64748b">—</text>
      </g>

      <!-- Protobuf -->
      <g transform="translate(0, 58)">
        <text x="20" y="10" class="small" font-weight="600" fill="#7c3aed">Protobuf</text>
        <text x="180" y="10" class="mono small" text-anchor="end">533,092</text>
        <text x="270" y="10" class="small" text-anchor="end" fill="#16a34a">+2.0%</text>
        <text x="380" y="10" class="mono small" text-anchor="end">138,696</text>
        <text x="470" y="10" class="small" text-anchor="end">3.84×</text>
      </g>

      <!-- Patchset -->
      <g transform="translate(0, 78)">
        <rect x="4" y="-4" width="492" height="18" rx="3" fill="#ecfdf5"/>
        <text x="20" y="10" class="small" font-weight="700" fill="#059669">Patchset</text>
        <text x="180" y="10" class="mono small" text-anchor="end" font-weight="600">538,761</text>
        <text x="270" y="10" class="small" text-anchor="end" fill="#16a34a" font-weight="600">+3.0%</text>
        <text x="380" y="10" class="mono small" text-anchor="end" font-weight="600">144,503</text>
        <text x="470" y="10" class="small" text-anchor="end" font-weight="600" fill="#b91c1c">3.73×</text>
      </g>

      <!-- CBOR -->
      <g transform="translate(0, 100)">
        <text x="20" y="10" class="small">CBOR</text>
        <text x="180" y="10" class="mono small" text-anchor="end">566,175</text>
        <text x="270" y="10" class="small" text-anchor="end" fill="#ea580c">+8.3%</text>
        <text x="380" y="10" class="mono small" text-anchor="end">138,057</text>
        <text x="470" y="10" class="small" text-anchor="end">4.10×</text>
      </g>

      <!-- JSON -->
      <g transform="translate(0, 120)">
        <text x="20" y="10" class="small">JSON</text>
        <text x="180" y="10" class="mono small" text-anchor="end">626,285</text>
        <text x="270" y="10" class="small" text-anchor="end" fill="#dc2626">+19.8%</text>
        <text x="380" y="10" class="mono small" text-anchor="end">141,607</text>
        <text x="470" y="10" class="small" text-anchor="end">4.42×</text>
      </g>

      <!-- SQL -->
      <g transform="translate(0, 140)">
        <text x="20" y="10" class="small">SQL</text>
        <text x="180" y="10" class="mono small" text-anchor="end">636,285</text>
        <text x="270" y="10" class="small" text-anchor="end" fill="#dc2626">+21.7%</text>
        <text x="380" y="10" class="mono small" text-anchor="end">140,952</text>
        <text x="470" y="10" class="small" text-anchor="end">4.51×</text>
      </g>

      <!-- Changeset -->
      <g transform="translate(0, 160)">
        <text x="20" y="10" class="small">Changeset</text>
        <text x="180" y="10" class="mono small" text-anchor="end">652,646</text>
        <text x="270" y="10" class="small" text-anchor="end" fill="#dc2626">+24.8%</text>
        <text x="380" y="10" class="mono small" text-anchor="end">148,584</text>
        <text x="470" y="10" class="small" text-anchor="end">4.39×</text>
      </g>

    </g>

    <!-- Compression Warning Box -->
    <g transform="translate(520, 18)">
      <rect width="316" height="88" rx="6" fill="#fef3c7" stroke="#fcd34d" stroke-width="1"/>
      <text x="16" y="18" class="label" font-weight="700" fill="#92400e">Compression Trade-off</text>
      <foreignObject x="16" y="26" width="284" height="58">
        <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: Inter, SF Pro Display, system-ui, sans-serif; font-size: 9px; color: #a16207; text-align: justify; line-height: 1.4;">
          Patchset has the lowest compression ratio (3.73×) due to its compact binary encoding. Text formats compress better (4.5×) but start 20% larger. After zstd, all formats converge to within ~5%—format choice matters less than compression.
        </div>
      </foreignObject>
    </g>

    <!-- Post-compression ranking -->
    <g transform="translate(520, 118)">
      <rect width="150" height="88" rx="6" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
      <text x="12" y="18" class="label" font-weight="700">After Zstd (size)</text>
      <text x="12" y="34" class="small">1. CBOR</text>
      <text x="138" y="34" class="mono tiny" text-anchor="end">138 KB</text>
      <text x="12" y="50" class="small">2. Protobuf</text>
      <text x="138" y="50" class="mono tiny" text-anchor="end">139 KB</text>
      <text x="12" y="66" class="small">3. SQL</text>
      <text x="138" y="66" class="mono tiny" text-anchor="end">141 KB</text>
      <text x="12" y="82" class="small" fill="#b91c1c">5. Patchset</text>
      <text x="138" y="82" class="mono tiny" text-anchor="end" fill="#b91c1c">145 KB</text>
    </g>

    <!-- Compression time -->
    <g transform="translate(686, 118)">
      <rect width="150" height="88" rx="6" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
      <text x="12" y="18" class="label" font-weight="700">Compress + Decompress</text>
      <text x="12" y="34" class="small">Protobuf</text>
      <text x="138" y="34" class="mono tiny" text-anchor="end">8.0 ms</text>
      <text x="12" y="50" class="small">CBOR</text>
      <text x="138" y="50" class="mono tiny" text-anchor="end">8.1 ms</text>
      <text x="12" y="66" class="small" fill="#059669">Patchset</text>
      <text x="138" y="66" class="mono tiny" text-anchor="end" fill="#059669">8.2 ms</text>
      <text x="12" y="82" class="small">SQL</text>
      <text x="138" y="82" class="mono tiny" text-anchor="end">8.7 ms</text>
    </g>
  </g>

  <!-- Apply Performance Section with Chart -->
  <g transform="translate(32, 918)">
    <text x="0" y="0" class="section-title">Apply Performance — Scaling Analysis (Integer PK, Populated Database)</text>

    <!-- Chart container -->
    <g transform="translate(0, 18)">
      <rect width="836" height="240" rx="6" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>

      <!-- Legend - LEFT SIDE, in chart area -->
      <g transform="translate(100, 40)">
        <rect x="-8" y="-8" width="148" height="80" rx="4" fill="#fff" stroke="#e2e8f0"/>
        <line x1="8" y1="12" x2="28" y2="12" stroke="#E74C3C" stroke-width="2"/>
        <text x="36" y="15" class="small">SQL (autocommit)</text>
        <line x1="8" y1="28" x2="28" y2="28" stroke="#E6A000" stroke-width="2"/>
        <text x="36" y="31" class="small">SQL (transaction)</text>
        <line x1="8" y1="44" x2="28" y2="44" stroke="#3498DB" stroke-width="2.5"/>
        <text x="36" y="47" class="small">Changeset</text>
        <line x1="8" y1="60" x2="28" y2="60" stroke="#2ECC71" stroke-width="2.5"/>
        <text x="36" y="63" class="small" font-weight="600">Patchset</text>
      </g>

      <!-- Chart area -->
      <g transform="translate(70, 20)">
        <!-- Y-axis labels -->
        <text x="-12" y="4" text-anchor="end" class="small">2.5 ms</text>
        <text x="-12" y="40" text-anchor="end" class="small">2.0 ms</text>
        <text x="-12" y="76" text-anchor="end" class="small">1.5 ms</text>
        <text x="-12" y="112" text-anchor="end" class="small">1.0 ms</text>
        <text x="-12" y="148" text-anchor="end" class="small">0.5 ms</text>
        <text x="-12" y="184" text-anchor="end" class="small">0</text>

        <!-- Grid lines -->
        <line x1="0" y1="0" x2="680" y2="0" stroke="#f1f5f9" stroke-width="1"/>
        <line x1="0" y1="36" x2="680" y2="36" stroke="#f1f5f9" stroke-width="1"/>
        <line x1="0" y1="72" x2="680" y2="72" stroke="#f1f5f9" stroke-width="1"/>
        <line x1="0" y1="108" x2="680" y2="108" stroke="#f1f5f9" stroke-width="1"/>
        <line x1="0" y1="144" x2="680" y2="144" stroke="#f1f5f9" stroke-width="1"/>
        <line x1="0" y1="180" x2="680" y2="180" stroke="#e2e8f0" stroke-width="1"/>

        <!-- X-axis labels -->
        <text x="0" y="196" text-anchor="middle" class="small">30</text>
        <text x="100" y="196" text-anchor="middle" class="small">100</text>
        <text x="200" y="196" text-anchor="middle" class="small">200</text>
        <text x="340" y="196" text-anchor="middle" class="small">400</text>
        <text x="480" y="196" text-anchor="middle" class="small">600</text>
        <text x="580" y="196" text-anchor="middle" class="small">800</text>
        <text x="680" y="196" text-anchor="middle" class="small">1000</text>

        <!-- SQL (autocommit) line - Red -->
        <polyline fill="none" stroke="#E74C3C" stroke-width="2"
          points="0,175 100,166 200,152 340,122 480,88 580,55 680,12"/>
        <circle cx="0" cy="175" r="3" fill="#E74C3C"/>
        <circle cx="100" cy="166" r="3" fill="#E74C3C"/>
        <circle cx="200" cy="152" r="3" fill="#E74C3C"/>
        <circle cx="340" cy="122" r="3" fill="#E74C3C"/>
        <circle cx="480" cy="88" r="3" fill="#E74C3C"/>
        <circle cx="580" cy="55" r="3" fill="#E74C3C"/>
        <circle cx="680" cy="12" r="3" fill="#E74C3C"/>

        <!-- SQL (transaction) line - Orange -->
        <polyline fill="none" stroke="#E6A000" stroke-width="2"
          points="0,175 100,168 200,156 340,132 480,106 580,76 680,42"/>
        <circle cx="0" cy="175" r="3" fill="#E6A000"/>
        <circle cx="100" cy="168" r="3" fill="#E6A000"/>
        <circle cx="200" cy="156" r="3" fill="#E6A000"/>
        <circle cx="340" cy="132" r="3" fill="#E6A000"/>
        <circle cx="480" cy="106" r="3" fill="#E6A000"/>
        <circle cx="580" cy="76" r="3" fill="#E6A000"/>
        <circle cx="680" cy="42" r="3" fill="#E6A000"/>

        <!-- Changeset line - Blue -->
        <polyline fill="none" stroke="#3498DB" stroke-width="2.5"
          points="0,173 100,169 200,164 340,156 480,146 580,138 680,130"/>
        <circle cx="0" cy="173" r="3" fill="#3498DB"/>
        <circle cx="100" cy="169" r="3" fill="#3498DB"/>
        <circle cx="200" cy="164" r="3" fill="#3498DB"/>
        <circle cx="340" cy="156" r="3" fill="#3498DB"/>
        <circle cx="480" cy="146" r="3" fill="#3498DB"/>
        <circle cx="580" cy="138" r="3" fill="#3498DB"/>
        <circle cx="680" cy="130" r="3" fill="#3498DB"/>

        <!-- Patchset line - Green -->
        <polyline fill="none" stroke="#2ECC71" stroke-width="2.5"
          points="0,174 100,170 200,166 340,158 480,150 580,142 680,136"/>
        <circle cx="0" cy="174" r="3" fill="#2ECC71"/>
        <circle cx="100" cy="170" r="3" fill="#2ECC71"/>
        <circle cx="200" cy="166" r="3" fill="#2ECC71"/>
        <circle cx="340" cy="158" r="3" fill="#2ECC71"/>
        <circle cx="480" cy="150" r="3" fill="#2ECC71"/>
        <circle cx="580" cy="142" r="3" fill="#2ECC71"/>
        <circle cx="680" cy="136" r="3" fill="#2ECC71"/>

        <!-- Speedup labels on the right -->
        <g transform="translate(695, 0)">
          <text x="0" y="16" class="tiny" fill="#E74C3C">2.35 ms</text>
          <text x="0" y="46" class="tiny" fill="#E6A000">1.92 ms</text>
          <text x="0" y="122" class="tiny" fill="#3498DB">0.69 ms</text>
          <text x="0" y="148" class="tiny" fill="#2ECC71" font-weight="600">0.61 ms</text>
          <rect x="0" y="160" width="56" height="28" rx="4" fill="#ecfdf5" stroke="#86efac"/>
          <text x="28" y="172" text-anchor="middle" font-size="10" font-weight="700" fill="#059669">3.9×</text>
          <text x="28" y="184" text-anchor="middle" class="tiny" fill="#047857">faster</text>
        </g>
      </g>

      <!-- Axis labels -->
      <text x="418" y="230" text-anchor="middle" class="label">Number of Operations</text>
      <text x="20" y="140" text-anchor="middle" class="label" transform="rotate(-90, 20, 140)">Median Time</text>
    </g>

    <!-- Caption -->
    <foreignObject x="0" y="266" width="836" height="60">
      <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: Inter, SF Pro Display, system-ui, sans-serif; font-size: 9px; color: #64748b; text-align: justify; line-height: 1.4;">
        <strong>Apply</strong> = execute changes against database. Patchset/Changeset use <code style="font-family: monospace; background: #f1f5f9; padding: 1px 2px; border-radius: 2px;">sqlite3changeset_apply()</code> which processes binary operations <em>directly</em>. SQL executes INSERT/UPDATE/DELETE statements parsed by SQLite. <strong>Autocommit</strong> = each statement commits immediately. <strong>Transaction</strong> = all wrapped in BEGIN/COMMIT. Mixed workload: 60% INSERT, 25% UPDATE, 15% DELETE. At 1000 ops: Patchset <strong>606 µs</strong> vs SQL 2.35 ms — <strong style="color: #059669;">3.9× faster</strong>. <em>Criterion.rs, in-memory SQLite, 95% CI.</em>
      </div>
    </foreignObject>
  </g>

  <!-- Build Performance Section -->
  <g transform="translate(32, 1258)">
    <text x="0" y="0" class="section-title">Build Performance — Generation Speed &amp; CDC Conversion Throughput</text>

    <g transform="translate(20, 18)">
      <!-- Generation speed -->
      <rect width="100" height="100" rx="6" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
      <use href="#icon-rust" x="40" y="6" width="20" height="20" fill="#4f46e5"/>
      <text x="50" y="40" text-anchor="middle" class="label" font-weight="700">Changeset</text>
      <text x="50" y="66" text-anchor="middle" font-size="32" font-weight="700" fill="#4f46e5">30×</text>
      <text x="50" y="82" text-anchor="middle" class="small">faster</text>
      <text x="50" y="94" text-anchor="middle" class="tiny" fill="#94a3b8">6.9µs vs 204µs</text>

      <!-- Compile time -->
      <g transform="translate(116, 0)">
        <rect width="100" height="100" rx="6" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
        <use href="#icon-rust" x="40" y="6" width="20" height="20" fill="#4f46e5"/>
        <text x="50" y="40" text-anchor="middle" class="label" font-weight="700">Compile</text>
        <text x="50" y="66" text-anchor="middle" font-size="32" font-weight="700" fill="#4f46e5">6×</text>
        <text x="50" y="82" text-anchor="middle" class="small">faster</text>
        <text x="50" y="94" text-anchor="middle" class="tiny" fill="#94a3b8">7.1s vs 42.4s</text>
      </g>

      <!-- Artifact size -->
      <g transform="translate(232, 0)">
        <rect width="100" height="100" rx="6" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
        <use href="#icon-rust" x="40" y="6" width="20" height="20" fill="#4f46e5"/>
        <text x="50" y="40" text-anchor="middle" class="label" font-weight="700">Artifact</text>
        <text x="50" y="66" text-anchor="middle" font-size="32" font-weight="700" fill="#4f46e5">6×</text>
        <text x="50" y="82" text-anchor="middle" class="small">smaller</text>
        <text x="50" y="94" text-anchor="middle" class="tiny" fill="#94a3b8">383KB vs 2.2MB</text>
      </g>

      <!-- wal2json Conversion -->
      <g transform="translate(348, 0)">
        <rect width="100" height="100" rx="6" fill="#fff" stroke="#7c3aed" stroke-width="1.5"/>
        <use href="#icon-postgres" x="40" y="6" width="20" height="20" fill="#5b21b6"/>
        <text x="50" y="40" text-anchor="middle" class="label" font-weight="700" fill="#5b21b6">wal2json</text>
        <text x="50" y="66" text-anchor="middle" font-size="32" font-weight="700" fill="#7c3aed">311</text>
        <text x="50" y="82" text-anchor="middle" class="small">MiB/s</text>
        <text x="50" y="94" text-anchor="middle" class="tiny" fill="#94a3b8">PostgreSQL</text>
      </g>

      <!-- pg_walstream Conversion -->
      <g transform="translate(464, 0)">
        <rect width="100" height="100" rx="6" fill="#fff" stroke="#0ea5e9" stroke-width="1.5"/>
        <use href="#icon-postgres" x="40" y="6" width="20" height="20" fill="#0369a1"/>
        <text x="50" y="40" text-anchor="middle" class="label" font-weight="700" fill="#0369a1">pg_walstream</text>
        <text x="50" y="66" text-anchor="middle" font-size="32" font-weight="700" fill="#0ea5e9">352</text>
        <text x="50" y="82" text-anchor="middle" class="small">MiB/s</text>
        <text x="50" y="94" text-anchor="middle" class="tiny" fill="#94a3b8">PostgreSQL</text>
      </g>

      <!-- Debezium Conversion -->
      <g transform="translate(580, 0)">
        <rect width="100" height="100" rx="6" fill="#fff" stroke="#dc2626" stroke-width="1.5"/>
        <use href="#icon-kafka" x="40" y="6" width="20" height="20" fill="#991b1b"/>
        <text x="50" y="40" text-anchor="middle" class="label" font-weight="700" fill="#991b1b">Debezium</text>
        <text x="50" y="66" text-anchor="middle" font-size="32" font-weight="700" fill="#dc2626">290</text>
        <text x="50" y="82" text-anchor="middle" class="small">MiB/s</text>
        <text x="50" y="94" text-anchor="middle" class="tiny" fill="#94a3b8">Kafka</text>
      </g>

      <!-- Maxwell Conversion -->
      <g transform="translate(696, 0)">
        <rect width="100" height="100" rx="6" fill="#fff" stroke="#f59e0b" stroke-width="1.5"/>
        <use href="#icon-mysql" x="40" y="6" width="20" height="20" fill="#b45309"/>
        <text x="50" y="40" text-anchor="middle" class="label" font-weight="700" fill="#b45309">Maxwell</text>
        <text x="50" y="66" text-anchor="middle" font-size="32" font-weight="700" fill="#f59e0b">232</text>
        <text x="50" y="82" text-anchor="middle" class="small">MiB/s</text>
        <text x="50" y="94" text-anchor="middle" class="tiny" fill="#94a3b8">MySQL</text>
      </g>
    </g>
  </g>

  <!-- Crate Properties Section -->
  <g transform="translate(32, 1400)">
    <text x="0" y="0" class="section-title">Crate Properties — Quality Assurance</text>

    <g transform="translate(0, 18)">
      <!-- Bit Parity Testing -->
      <rect width="268" height="84" rx="6" fill="#f0fdf4" stroke="#86efac" stroke-width="1"/>
      <use href="#icon-check" x="12" y="12" width="16" height="16" fill="#059669"/>
      <text x="142" y="24" text-anchor="middle" font-size="11" font-weight="700" fill="#065f46">Bit Parity Tested</text>
      <foreignObject x="12" y="32" width="244" height="48">
        <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: Inter, SF Pro Display, system-ui, sans-serif; font-size: 9px; color: #047857; text-align: center; line-height: 1.4;">
          Output verified <strong>byte-for-byte identical</strong> to SQLite's native session extension across all value types.
        </div>
      </foreignObject>

      <!-- Extensively Fuzzed -->
      <g transform="translate(284, 0)">
        <rect width="268" height="84" rx="6" fill="#f0fdf4" stroke="#86efac" stroke-width="1"/>
        <use href="#icon-check" x="12" y="12" width="16" height="16" fill="#059669"/>
        <text x="142" y="24" text-anchor="middle" font-size="11" font-weight="700" fill="#065f46">Extensively Fuzzed</text>
        <foreignObject x="12" y="32" width="244" height="48">
          <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: Inter, SF Pro Display, system-ui, sans-serif; font-size: 9px; color: #047857; text-align: center; line-height: 1.4;">
            <strong>9 fuzz targets</strong>: roundtrip, SQL, apply, differential testing, reverse, wal2json, pg_walstream, Debezium, Maxwell.
          </div>
        </foreignObject>
      </g>

      <!-- no_std Compatible -->
      <g transform="translate(568, 0)">
        <rect width="268" height="84" rx="6" fill="#f0fdf4" stroke="#86efac" stroke-width="1"/>
        <use href="#icon-check" x="12" y="12" width="16" height="16" fill="#059669"/>
        <text x="142" y="24" text-anchor="middle" font-size="11" font-weight="700" fill="#065f46">no_std Compatible</text>
        <foreignObject x="12" y="32" width="244" height="48">
          <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: Inter, SF Pro Display, system-ui, sans-serif; font-size: 9px; color: #047857; text-align: center; line-height: 1.4;">
            Works in <strong>embedded</strong> and <strong>WASM</strong> without std. <em>Zero unsafe code.</em> Optional alloc for heap operations.
          </div>
        </foreignObject>
      </g>
    </g>
  </g>

  <!-- Security and Key Advantage -->
  <g transform="translate(32, 1526)">
    <!-- Security -->
    <rect width="410" height="76" rx="6" fill="#ecfdf5" stroke="#86efac" stroke-width="1"/>
    <use href="#icon-shield" x="12" y="10" width="24" height="24" fill="#059669"/>
    <text x="44" y="24" font-size="11" font-weight="700" fill="#065f46">SQL Injection: Eliminated by Design</text>
    <foreignObject x="44" y="30" width="354" height="42">
      <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: Inter, SF Pro Display, system-ui, sans-serif; font-size: 10px; color: #047857; text-align: justify; line-height: 1.4;">
        Binary changesets contain <strong>no parseable SQL</strong>. Malformed input causes parse errors, <em>not query execution</em>. <strong>Zero attack surface</strong> for injection.
      </div>
    </foreignObject>

    <!-- Key Advantage -->
    <g transform="translate(426, 0)">
      <rect width="410" height="76" rx="6" fill="#f5f3ff" stroke="#c4b5fd" stroke-width="1"/>
      <use href="#icon-check" x="12" y="10" width="24" height="24" fill="#7c3aed"/>
      <text x="44" y="24" font-size="11" font-weight="700" fill="#5b21b6">No Application-Layer Serialization</text>
      <foreignObject x="44" y="30" width="354" height="42">
        <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: Inter, SF Pro Display, system-ui, sans-serif; font-size: 10px; color: #6b21a8; text-align: justify; line-height: 1.4;">
          Unlike Protobuf (.proto), CBOR (structs), or JSON (schema), patchsets are <strong>directly applicable</strong> via <code style="font-family: monospace; background: #ede9fe; padding: 1px 3px; border-radius: 2px;">sqlite3changeset_apply()</code>. <em>Less code = fewer bugs.</em>
        </div>
      </foreignObject>
    </g>
  </g>

  <!-- Summary: Strengths and Limitations -->
  <g transform="translate(32, 1626)">
    <text x="0" y="0" class="section-title">Summary</text>

    <!-- Strengths -->
    <g transform="translate(0, 18)">
      <rect width="410" height="150" rx="6" fill="#ecfdf5" stroke="#86efac" stroke-width="1"/>
      <text x="205" y="18" text-anchor="middle" font-size="11" font-weight="700" fill="#065f46">Strengths</text>
      <line x1="16" y1="28" x2="394" y2="28" stroke="#86efac"/>
      <text x="24" y="46" class="small" fill="#047857">• Smallest uncompressed payload (+3% overhead vs raw)</text>
      <text x="24" y="64" class="small" fill="#047857">• 3.4–3.9× faster apply than SQL execution at scale</text>
      <text x="24" y="82" class="small" fill="#047857">• Zero application-layer serialization code required</text>
      <text x="24" y="100" class="small" fill="#047857">• SQL injection impossible by design (binary format)</text>
      <text x="24" y="118" class="small" fill="#047857">• 30× faster generation, 6× faster compile, 6× smaller</text>
      <text x="24" y="136" class="small" fill="#047857">• Bit parity tested, extensively fuzzed, no_std compatible</text>
    </g>

    <!-- Limitations -->
    <g transform="translate(426, 18)">
      <rect width="410" height="150" rx="6" fill="#fef2f2" stroke="#fecaca" stroke-width="1"/>
      <text x="205" y="18" text-anchor="middle" font-size="11" font-weight="700" fill="#991b1b">Limitations</text>
      <line x1="16" y1="28" x2="394" y2="28" stroke="#fecaca"/>
      <text x="24" y="46" class="small" fill="#b91c1c">• Worst compression ratio (3.73× vs 4.5× for text formats)</text>
      <text x="24" y="64" class="small" fill="#b91c1c">• After zstd: all formats converge to within ~5%</text>
      <text x="24" y="82" class="small" fill="#b91c1c">• SQLite-specific, not portable to other databases</text>
      <text x="24" y="100" class="small" fill="#b91c1c">• Binary format, not human-readable for debugging</text>
      <text x="24" y="118" class="small" fill="#b91c1c">• Session extension can be compiled out (OMIT_SESSION)</text>
      <text x="24" y="136" class="small" fill="#b91c1c">• Requires understanding of SQLite session semantics</text>
    </g>
  </g>

  <!-- When to Use -->
  <g transform="translate(32, 1818)">
    <text x="0" y="0" class="section-title">When to Use</text>

    <g transform="translate(0, 18)">
      <!-- Patchset -->
      <rect width="268" height="84" rx="6" fill="#ecfdf5" stroke="#86efac" stroke-width="1"/>
      <text x="10" y="24" font-size="11" font-weight="700" fill="#065f46">Use Patchset</text>
      <text x="10" y="44" class="small" fill="#047857">• Bandwidth-constrained environments (mobile, IoT)</text>
      <text x="10" y="60" class="small" fill="#047857">• Forward-only sync where rollback is not needed</text>
      <text x="10" y="76" class="small" fill="#047857">• Uncompressed or lightly-compressed wire transmission</text>

      <!-- Changeset -->
      <g transform="translate(284, 0)">
        <rect width="268" height="84" rx="6" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1"/>
        <text x="10" y="24" font-size="11" font-weight="700" fill="#1e40af">Use Changeset</text>
        <text x="10" y="44" class="small" fill="#1d4ed8">• Undo/rollback functionality required</text>
        <text x="10" y="60" class="small" fill="#1d4ed8">• Conflict detection with full old/new context</text>
        <text x="10" y="76" class="small" fill="#1d4ed8">• Audit trail and history tracking applications</text>
      </g>

      <!-- Alternatives -->
      <g transform="translate(568, 0)">
        <rect width="268" height="84" rx="6" fill="#fef3c7" stroke="#fcd34d" stroke-width="1"/>
        <text x="10" y="24" font-size="11" font-weight="700" fill="#92400e">Consider Alternatives</text>
        <text x="10" y="44" class="small" fill="#b45309">• Cross-database portability required → Protobuf</text>
        <text x="10" y="60" class="small" fill="#b45309">• Heavy zstd compression in use → SQL/JSON</text>
        <text x="10" y="76" class="small" fill="#b45309">• Human debugging and inspection → JSON</text>
      </g>
    </g>
  </g>

  <!-- Session Extension Note -->
  <g transform="translate(32, 1944)">
    <rect width="836" height="44" rx="6" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1"/>
    <foreignObject x="16" y="10" width="804" height="28">
      <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: Inter, SF Pro Display, system-ui, sans-serif; font-size: 9px; color: #64748b; text-align: justify; line-height: 1.4;">
        <strong>Session Extension Note:</strong> SQLite's session extension is included in the amalgamation <em>by default</em> but can be compiled out with <code style="font-family: SF Mono, JetBrains Mono, Consolas, monospace; background: #e2e8f0; padding: 1px 3px; border-radius: 2px;">-DSQLITE_OMIT_SESSION=1</code>. <em>Not all SQLite deployments have it enabled</em> (e.g., some mobile or embedded builds may omit it for size reasons).
      </div>
    </foreignObject>
  </g>

  <!-- Footer -->
  <g transform="translate(32, 2008)">
    <line x1="0" y1="0" x2="836" y2="0" stroke="#e2e8f0"/>
    <text x="0" y="18" class="tiny" fill="#94a3b8">sqlite-diff-rs</text>
    <text x="418" y="18" text-anchor="middle" class="tiny" fill="#94a3b8">Pure Rust implementation of SQLite changeset/patchset format</text>
    <text x="836" y="18" text-anchor="end" class="tiny" fill="#64748b">github.com/LucaCappelletti94/sqlite-diff-rs</text>
  </g>
</svg>
